{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _matchPercent = _interopRequireDefault(require(\"../utils/matchPercent\"));\n/**\n * Transform percent height into fixed\n *\n * @param {String | number} height\n * @return {number} height\n */\n\n\nvar transformHeight = function transformHeight(pageArea) {\n  return function (height) {\n    var match = (0, _matchPercent.default)(height);\n    return match ? match.percent * pageArea : height;\n  };\n};\n/**\n * Get page area (height minus paddings)\n *\n * @param {Object} page\n * @return {number} page area\n */\n\n\nvar getPageArea = function getPageArea(page) {\n  var pageHeight = R.path(['style', 'height'], page);\n  var pagePaddingTop = R.pathOr(0, ['style', 'paddingTop'], page);\n  var pagePaddingBottom = R.pathOr(0, ['style', 'paddingBottom'], page);\n  return pageHeight - pagePaddingTop - pagePaddingBottom;\n};\n/**\n * Checks if page has height\n *\n * @param {Object} page\n * @return {boolean} page has height\n */\n\n\nvar hasHeight = R.hasPath(['style', 'height']);\n/**\n * Transform node percent height to fixed\n *\n * @param {Object} page\n * @param {Object} node\n * @return {Object} transformed node\n */\n\nvar resolveNodePercentHeight = function resolveNodePercentHeight(page) {\n  return function (node) {\n    if (hasHeight(page)) {\n      var pageArea = getPageArea(page);\n      return R.evolve({\n        style: {\n          height: transformHeight(pageArea)\n        }\n      })(node);\n    }\n\n    return node;\n  };\n};\n/**\n * Transform page immediate children with percent height to fixed\n *\n * @param {Object} page\n * @return {Object} transformed page\n */\n\n\nvar resolvePagePercentHeight = function resolvePagePercentHeight(page) {\n  return R.evolve({\n    children: R.map(resolveNodePercentHeight(page))\n  })(page);\n};\n/**\n * Transform all page immediate children with percent height to fixed.\n * This is needed for computing correct dimensions on pre-pagination layout.\n *\n * @param {Object} document root\n * @return {Object} transformed document root\n */\n\n\nvar resolvePercentHeight = R.evolve({\n  children: R.map(resolvePagePercentHeight)\n});\nvar _default = resolvePercentHeight;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}